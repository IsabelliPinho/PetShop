/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package View;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author isabe
 */
public class Tela extends javax.swing.JFrame {

    private static void removeRecord(String cadastrotxt, String nome, String idade, String raca, String cor, String alergia, String dono) {
        throw new UnsupportedOperationException("Not supported yet."); // Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/GeneratedMethodBody
    }

   DateFormat dateFormat = new SimpleDateFormat("MM/dd/YY");
   Date date = new Date();
   Calendar cal = Calendar.getInstance();
   DefaultTableModel model;
    /**
     * Creates new form Loading
     */
    public Tela() {
        initComponents();
        model = (DefaultTableModel) tabela.getModel();
        JTdata.setText(" " + dateFormat.format(date));
        
        
        
    }

   
    
   
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        JLraca = new javax.swing.JLabel();
        JLnome = new javax.swing.JLabel();
        JTnome = new javax.swing.JTextField();
        JTraca = new javax.swing.JTextField();
        JLnomeDono = new javax.swing.JLabel();
        JTnomeDono = new javax.swing.JTextField();
        JLidade = new javax.swing.JLabel();
        JTidade = new javax.swing.JTextField();
        JLalergia = new javax.swing.JLabel();
        JTalergia = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        JTcor = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        tabela = new javax.swing.JTable();
        enterBtn = new javax.swing.JButton();
        JLvacina = new javax.swing.JLabel();
        JTvacina = new javax.swing.JTextField();
        JLproxvac = new javax.swing.JLabel();
        JTproxvac = new javax.swing.JTextField();
        JLdata = new javax.swing.JLabel();
        JTdata = new javax.swing.JTextField();
        btnDelete = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        Salvarbtn = new javax.swing.JButton();
        Atualizar = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        TA = new javax.swing.JTextArea();
        telinha = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setFocusTraversalPolicyProvider(true);
        setPreferredSize(new java.awt.Dimension(900, 500));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        JLraca.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLraca.setText("Raça:");
        getContentPane().add(JLraca, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 240, -1, -1));

        JLnome.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLnome.setText("Nome:");
        getContentPane().add(JLnome, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 190, -1, -1));

        JTnome.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTnome, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 190, 310, -1));

        JTraca.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTraca, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 240, 310, -1));

        JLnomeDono.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLnomeDono.setText("Nome do(a) Dono(a):");
        getContentPane().add(JLnomeDono, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 290, -1, -1));

        JTnomeDono.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTnomeDono, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 300, 310, -1));

        JLidade.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLidade.setText("Idade:");
        getContentPane().add(JLidade, new org.netbeans.lib.awtextra.AbsoluteConstraints(890, 180, 80, 30));

        JTidade.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        JTidade.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JTidadeActionPerformed(evt);
            }
        });
        getContentPane().add(JTidade, new org.netbeans.lib.awtextra.AbsoluteConstraints(960, 190, 60, -1));

        JLalergia.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLalergia.setText("Alergia(s):");
        getContentPane().add(JLalergia, new org.netbeans.lib.awtextra.AbsoluteConstraints(850, 230, -1, -1));

        JTalergia.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        JTalergia.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                JTalergiaActionPerformed(evt);
            }
        });
        getContentPane().add(JTalergia, new org.netbeans.lib.awtextra.AbsoluteConstraints(960, 240, 250, -1));

        jLabel1.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        jLabel1.setText("Cor:");
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(910, 290, -1, -1));

        JTcor.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTcor, new org.netbeans.lib.awtextra.AbsoluteConstraints(960, 300, 250, -1));

        tabela.setBackground(new java.awt.Color(255, 255, 153));
        tabela.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(153, 153, 0)));
        tabela.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        tabela.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Data", "Vacina", "Prox.Vac"
            }
        ));
        tabela.setGridColor(new java.awt.Color(102, 102, 0));
        tabela.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabelaMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tabela);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 490, 410, 100));

        enterBtn.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        enterBtn.setText("Adicionar");
        enterBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                enterBtnActionPerformed(evt);
            }
        });
        getContentPane().add(enterBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 570, -1, -1));

        JLvacina.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLvacina.setText("Vacina:");
        getContentPane().add(JLvacina, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 630, -1, -1));

        JTvacina.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTvacina, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 640, 170, -1));

        JLproxvac.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLproxvac.setText("Próxima Vacina:");
        getContentPane().add(JLproxvac, new org.netbeans.lib.awtextra.AbsoluteConstraints(570, 630, -1, -1));

        JTproxvac.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTproxvac, new org.netbeans.lib.awtextra.AbsoluteConstraints(750, 640, 180, -1));

        JLdata.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        JLdata.setText("Data:");
        getContentPane().add(JLdata, new org.netbeans.lib.awtextra.AbsoluteConstraints(950, 630, -1, -1));

        JTdata.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(JTdata, new org.netbeans.lib.awtextra.AbsoluteConstraints(1020, 640, 230, -1));

        btnDelete.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        btnDelete.setText("Deletar Linha");
        btnDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDeleteActionPerformed(evt);
            }
        });
        getContentPane().add(btnDelete, new org.netbeans.lib.awtextra.AbsoluteConstraints(740, 520, -1, -1));

        jLabel2.setFont(new java.awt.Font("Century Schoolbook", 0, 48)); // NOI18N
        jLabel2.setText("Registro do Pet");
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(520, 60, -1, -1));

        Salvarbtn.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        Salvarbtn.setText("Salvar");
        Salvarbtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SalvarbtnActionPerformed(evt);
            }
        });
        getContentPane().add(Salvarbtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(1150, 560, -1, -1));

        Atualizar.setFont(new java.awt.Font("Yu Gothic UI Light", 1, 24)); // NOI18N
        Atualizar.setText("Atualizar");
        Atualizar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AtualizarActionPerformed(evt);
            }
        });
        getContentPane().add(Atualizar, new org.netbeans.lib.awtextra.AbsoluteConstraints(760, 470, -1, -1));

        TA.setColumns(20);
        TA.setRows(5);
        jScrollPane2.setViewportView(TA);

        getContentPane().add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(920, 340, 360, 200));

        telinha.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        telinha.setForeground(new java.awt.Color(255, 255, 255));
        telinha.setIcon(new javax.swing.ImageIcon(getClass().getResource("/View/icon/d.jpg"))); // NOI18N
        getContentPane().add(telinha, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1420, 800));

        setSize(new java.awt.Dimension(1421, 732));
        setLocationRelativeTo(null);
    }// </editor-fold>                        

    private void JTidadeActionPerformed(java.awt.event.ActionEvent evt) {                                        
        // TODO add your handling code here:
    }                                       

    private void JTalergiaActionPerformed(java.awt.event.ActionEvent evt) {                                          
        // TODO add your handling code here:
    }                                         

    private void enterBtnActionPerformed(java.awt.event.ActionEvent evt) {                                         
      model.insertRow(model.getRowCount(),new Object[]{
          JTdata.getText(),JTvacina.getText(),JTproxvac.getText()
      
              });
    }                                        

    private void btnDeleteActionPerformed(java.awt.event.ActionEvent evt) {                                          
      DefaultTableModel tblModel = (DefaultTableModel) tabela.getModel();
      if(tabela.getSelectedRowCount()==1){
          tblModel.removeRow(tabela.getSelectedRow());
          
      }
      else {
          if (tabela.getRowCount()==0){//se a tabela tiver vazia
         JOptionPane.showMessageDialog(this,"A tabela está vazia!");
         
          }else{
           JOptionPane.showMessageDialog(this,"Selecione alguma ou apenas uma linha para Deletar.");   
          }
      }
    }                                         

    private void SalvarbtnActionPerformed(java.awt.event.ActionEvent evt) {                                          
       
           String nome=JTnome.getText(); 
             String idade=JTidade.getText(); 
               String raca=JTraca.getText(); 
                 String cor=JTcor.getText(); 
                   String alergia=JTalergia.getText(); 
                     String Dono=JTnomeDono.getText();  //Salvar em arquivo txt
                     try{
                     FileWriter Writer = new FileWriter("Cadastro.txt",true);
                     Writer.write(", "+nome+", "+idade+", "+raca+", "+cor+", "+alergia+", "+Dono);
                    Writer.write(System.getProperty("line.separator"));
                    Writer.close();
                    JOptionPane.showMessageDialog(null,"Salvo com Sucesso!");
                   
                   FileInputStream fstream = new FileInputStream("Cadastro.txt");
                    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                    String sw =" , ";
                    try
                    {
                         while(sw != null)
                         {
                             sw = br.readLine();
                             TA.append(sw + "\n");
                         }
                    } catch (IOException ex) {
                            ex.printStackTrace();
                        }

    
                     }
                    
                     catch(Exception e){
                      JOptionPane.showMessageDialog(null,"Erro!");
                     }
    }                                         

    private void tabelaMouseClicked(java.awt.event.MouseEvent evt) {                                    
        // TODO add your handling code here:
    }                                   

    private void AtualizarActionPerformed(java.awt.event.ActionEvent evt) {                                          
      int i= tabela.getSelectedRow();
      if (i>=0){
      model.setValueAt(JTvacina.getText(),i,1);
       model.setValueAt(JTproxvac.getText(),i,2);
        model.setValueAt(JTdata.getText(),i,0);
      }else{
      JOptionPane.showMessageDialog(null,"Erro");
      }
    }                                         



    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
    
        
    }

  
   
  

    // Variables declaration - do not modify                     
    private javax.swing.JButton Atualizar;
    private javax.swing.JLabel JLalergia;
    private javax.swing.JLabel JLdata;
    private javax.swing.JLabel JLidade;
    private javax.swing.JLabel JLnome;
    private javax.swing.JLabel JLnomeDono;
    private javax.swing.JLabel JLproxvac;
    private javax.swing.JLabel JLraca;
    private javax.swing.JLabel JLvacina;
    private javax.swing.JTextField JTalergia;
    private javax.swing.JTextField JTcor;
    private javax.swing.JTextField JTdata;
    private javax.swing.JTextField JTidade;
    private javax.swing.JTextField JTnome;
    private javax.swing.JTextField JTnomeDono;
    private javax.swing.JTextField JTproxvac;
    private javax.swing.JTextField JTraca;
    private javax.swing.JTextField JTvacina;
    private javax.swing.JButton Salvarbtn;
    private javax.swing.JTextArea TA;
    private javax.swing.JButton btnDelete;
    private javax.swing.JButton enterBtn;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable tabela;
    private javax.swing.JLabel telinha;
    // End of variables declaration                   
}
